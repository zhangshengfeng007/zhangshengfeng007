C51 COMPILER V9.60.7.0   INTERRUPT                                                         04/16/2024 15:09:53 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE INTERRUPT
OBJECT MODULE PLACED IN .\output\interrupt.obj
COMPILER INVOKED BY: F:\tool_start\keil_c51\C51\BIN\C51.EXE source\interrupt.c OMF2 OPTIMIZE(8,SPEED) BROWSE DEBUG PRINT
                    -(.\lst\interrupt.lst) TABS(2) OBJECT(.\output\interrupt.obj)

line level    source

   1          #ifndef _INTERRUPT_C_
   2          #define _INTERRUPT_C_
   3          
   4          /*********************************************************************************************************
             -************/
   5          #include "include/ca51f1s6_config.h"    
   6          #include "include/ca51f1s6sfr.h"
   7          #include "include/ca51f1s6xsfr.h"
   8          #include "include/gpiodef_f1s6.h"
   9          
  10          #include "include/uart.h"
  11          /*********************************************************************************************************
             -************/
  12          
  13          
  14          extern char recv_led_data;
  15          //extern char disp_led_data = 0xff;
  16          extern char recv_flag;
  17          extern char recv_cnt;
  18          extern unsigned int time_out_cnt;
  19          extern char recv_frame_buff[10];
  20          extern char recv_index;
  21          
  22          
  23          
  24          void INT2_ISR (void) interrupt 4 
  25          {
  26   1      #ifdef UART1_EN
  27   1        UART1_ISR();
  28   1      #endif
  29   1      }
  30          
  31          void INT4_ISR(void) interrupt 6 
  32          {
  33   1      #ifdef UART2_EN
                UART2_ISR();
              #endif
  36   1        if(EPIF & 0x04)         //判断外部中断4中断标志
  37   1        {
  38   2          EPIF = 0x04;        //中断标志写1清0
  39   2          
  40   2          //int4_flag = 1;
  41   2      
  42   2            time_out_cnt = 0;
  43   2          
  44   2            if(recv_cnt < 8)
  45   2            {
  46   3              recv_led_data >>= 1;
  47   3              if(P17) // data
  48   3              {
  49   4                recv_led_data |= 0x80;
  50   4              }
  51   3              else
  52   3              {
C51 COMPILER V9.60.7.0   INTERRUPT                                                         04/16/2024 15:09:53 PAGE 2   

  53   4                recv_led_data &= ~0x80;
  54   4              } 
  55   3      //        if(recv_cnt % 8 == 0)
  56   3      //        {
  57   3      //          recv_frame_buff[recv_index % 10] = recv_led_data;
  58   3      //          recv_index ++;
  59   3      //        }
  60   3              
  61   3              
  62   3      //        recv_frame_buff[recv_cnt/8] >>= 1;
  63   3      //        if(P17) // data
  64   3      //        {
  65   3      //          recv_frame_buff[recv_cnt/8] |= 0x80;
  66   3      //        }
  67   3      //        else
  68   3      //        {
  69   3      //          recv_frame_buff[recv_cnt/8] &= ~0x80;
  70   3      //        }   
  71   3      //        
  72   3              
  73   3              recv_cnt ++;
  74   3            }
  75   2        }
  76   1        
  77   1        
  78   1      }
  79          
  80          /*********************************************************************************************************
             -************/
  81          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    117    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
